{% extends "adminlte/base.html" %}
{% load static report_filters %}

{% block base_head_title %}
    {{ object.answer.name }}
{% endblock %}
{% block base_head_title_system_name %}Action28 调查报告{% endblock %}

{% block header_base_style %}{% endblock %}
{% block header_base_script %}
    {% inline_static 'css/report/report_pdf.css' %}
{% endblock %}

{% block base_body %}
    <body class="report-download">
    <div class="page page-wrapper">
        <table class="header">
            <tr class="gap"></tr>
            <tr class="gap"></tr>
            <tr>
                <td><img height="100px" src="{% base64_static 'qrcode_logo.jpg' %}">
                    <h1 class="title">Action28 调查报告</h1></td>
            </tr>
        </table>

        <div class="page-wrapper">
            <h2>1.基本信息</h2>
            <table class="info">
                <tr>
                    <th style="width:30mm">姓名</th>
                    <td>{{ object.answer.name }}</td>
                    <th style="width:30mm">性别</th>
                    <td>{{ object.answer.sex }}</td>
                </tr>
                <tr>
                    <th>目标</th>
                    <td>{{ object.purpose }}</td>
                    <th>价位</th>
                    <td>{{ object.level }}</td>
                </tr>
                <tr>
                    <th>年龄</th>
                    <td>{{ object.answer.age }}</td>
                    <th>城市</th>
                    <td>{{ object.answer.city }}</td>
                </tr>
            </table>
            <br/>

            <h2>2.皮肤检测报告</h2>
            <table class="skin">
                <thead class="thead-dark" style="background: #dddddd;">
                <tr>
                    <th style="width:45mm">肤质</th>
                    <th style="width:40mm">检测分数</th>
                    <th style="width:85mm">参考提示</th>
                    <th>备注</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>{{ object.oily_type }}</td>
                    <td>{{ object.answer.oily_score }}</td>
                    <td>{{ object.oily_type.short_description }}</td>
                    <td>{{ object.oily_type.description }}</td>
                </tr>
                <tr>
                    <td>{{ object.sensitive_type }}</td>
                    <td>{{ object.answer.sensitive_score }}</td>
                    <td>{{ object.sensitive_type.short_description }}</td>
                    <td>{{ object.sensitive_type.description }}</td>
                </tr>
                <tr>
                    <td>{{ object.pigment_type }}</td>
                    <td>{{ object.answer.pigment_score }}</td>
                    <td>{{ object.pigment_type.short_description }}</td>
                    <td>{{ object.pigment_type.description }}</td>
                </tr>
                <tr>
                    <td>{{ object.loose_type }}</td>
                    <td>{{ object.answer.loose_score }}</td>
                    <td>{{ object.loose_type.short_description }}</td>
                    <td>{{ object.loose_type.description }}</td>
                </tr>
                <tr>
                    <th>总结</th>
                    <td colspan="3">{{ form.summary|default:"无" }}</td>
                </tr>
                </tbody>
            </table>
            <br/>

            <h2>Basic 诊断</h2>
            <h2>一. 护肤方式诊断</h2>
            <h3>1. 您现在的护肤步骤</h3>
            <table class="habit">
                <tr>
                    <th style="width: 40mm">日间</th>
                    <td>
                        <ul>
                            <li>洁面类选择: {{ object.answer.non_score_question2 }}</li>
                            <li>化妆水选择: {{ object.answer.non_score_question3 }}</li>
                            <li>精华类选择: {{ object.answer.non_score_question4 }}</li>
                            <li>乳液面霜类: {{ object.answer.non_score_question5 }}</li>
                            <li>防晒类选择: {{ object.answer.non_score_question6 }}</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <th>夜间</th>
                    <td>
                        <ul>
                            <li>卸妆类选择: {{ object.answer.non_score_question7 }}</li>
                            <li>洁面类选择: {{ object.answer.non_score_question8 }}</li>
                            <li>化妆水选择: {{ object.answer.non_score_question9 }}</li>
                            <li>精华类选择: {{ object.answer.non_score_question10 }}</li>
                            <li>乳液面霜类: {{ object.answer.non_score_question11 }}</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <th>面膜</th>
                    <td>
                        {{ object.answer.non_score_question12 }}
                    </td>
                </tr>
                <tr>
                    <th>去角质</th>
                    <td>
                        {{ object.answer.non_score_question13 }}
                    </td>
                </tr>
            </table>
            <br/>

            <h3>2. 我们认为您存在的问题</h3>
            <div>
                <p>{{ object.problem|default:"无" }}</p>
            </div>
            <br/>

            <h2>二、护肤品的选择</h2>
            <h3>1. 过敏成分及症状</h3>
            <div>
                <p>{{ object.allergy|default:"无" }}</p>
            </div>
            <br/>

            <h3>2. 护肤品分析</h3>
            <table class="table table-bordered">
                <thead>
                <tr>
                    <th style="width:90mm">护肤品</th>
                    <th>护肤品分析</th>
                </tr>
                </thead>
                <tbody>
                {% include 'report/includes/answer_product_readonly.html' with products=object.answer.cosmetic_products1.all %}
                {% include 'report/includes/answer_product_readonly.html' with products=object.answer.cosmetic_products2.all %}
                {% include 'report/includes/answer_product_readonly.html' with products=object.answer.cosmetic_products3.all %}
                {% include 'report/includes/answer_product_readonly.html' with products=object.answer.cosmetic_products4.all %}
                {% include 'report/includes/answer_product_readonly.html' with products=object.answer.cosmetic_products5.all %}
                {% include 'report/includes/answer_product_readonly.html' with products=object.answer.cosmetic_products6.all %}
                {% include 'report/includes/answer_product_readonly.html' with products=object.answer.cosmetic_products7.all %}
                {% include 'report/includes/answer_product_readonly.html' with products=object.answer.cosmetic_products8.all %}
                </tbody>
            </table>
            <br/>

            <h3>4. 需要避免使用的皮肤护理成分</h3>
            <div>
                <p>{{ object.avoid_component|default:"无" }}</p>
            </div>
            <br/>

            <h3>5. 建议您更换的产品</h3>
            <div class="col-xs-11 col-xs-offset-1">
                {% include 'report/includes/premium_product_formset.html' with products_formset=day_products_formset title='日间' %}
                {% include 'report/includes/premium_product_formset.html' with products_formset=night_products_formset title='晚间' %}
                {% include 'report/includes/premium_product_formset.html' with products_formset=mask_products_formset title='面膜' %}
            </div>
            <br/>

            <h2>三、听听皮肤科医生怎么说</h2>
            <div>
                <p>{{ object.doctor_advice|default:"无" }}</p>
            </div>
            <br/>

            <h3>Practise 指导方案</h3>
            <table class="table table-bordered">
                <tr>
                    <th>日间</th>
                    <td>
                        {{ object.day_instruct }}
                    </td>
                </tr>
                <tr>
                    <th>夜间</th>
                    <td>
                        {{ object.night_instruct }}
                    </td>
                </tr>
                <tr>
                    <th>面膜</th>
                    <td>
                        {{ object.mask_instruct }}
                    </td>
                </tr>
            </table>
            <br/>

            <h3>四. Extra 皮肤科急速解决方案</h3>
            <p>根据您的肌肤状况给您如下建议:</p>
            <h4>应急方案</h4>
            <div>
                <p>{{ object.emergency_solution|default:"无" }}</p>
            </div>
            <br/>

            <h4>日常维稳方案</h4>
            <p>您可以按照以下方式进行护理：</p>
            <div>
                <p>{{ object.maintain_solution|default:"无" }}</p>
            </div>
            <br/>
            <p>所有医美方案需在专业医生指导下进行。</p>
        </div>

    </div>
    </body>
{% endblock %}

