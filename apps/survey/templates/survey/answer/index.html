{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="{% static 'favicon.ico' %}">

    <title>Action28肌肤测试问卷</title>

    <!-- Bootstrap core CSS -->
    <link href="{% static 'plugins/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="{% static 'css/survey/pc.css' %}" rel="stylesheet">
    <link href="{% static 'adminlte/css/font-awesome.min.css' %}" rel="stylesheet" type="text/css" />

    <link href="{% static 'plugins/sweetalert/1.1.3/sweetalert.min.css' %}" rel="stylesheet" type="text/css">

    <script type="text/javascript" src="{% static 'plugins/sweetalert/1.1.3/sweetalert.min.js' %}"></script>

    <!-- Placed at the end of the document so the pages load faster -->
    <script>window.jQuery || document.write('<script src="{% static "plugins/jQuery/jquery-3.2.1.min.js" %}"><\/script>')</script>

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
{#    <link href="../../assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">#}

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
{#    <script src="../../assets/js/ie-emulation-modes-warning.js"></script>#}

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

<div class="container">

    <div id="question">
        <div id="header">
            <h1>Action28肌肤测试问卷</h1>
        </div>
            <!--<img src=".././assets/logo.png">-->
        <div id="section">
{#            {% if form.purpose.value %}#}
{#                <div>目标: {{ form.purpose.value }}</div>#}
{#            {% endif %}#}
{#            {% if form.level.value %}#}
{#                <div>价位: {{ form.level.value }}</div>#}
{#            {% endif %}#}
            <form id="form" enctype="multipart/form-data" method="post" action="">
                {% csrf_token %}
                {{ form.uuid }}

                {% include 'survey/includes/question.html' with field=form.name number=1 %}
                {% include 'survey/includes/question.html' with field=form.sex  number=2 %}
                {% include 'survey/includes/question.html' with field=form.portrait number=3 %}
                {% include 'survey/includes/question.html' with field=form.portrait_part number=4 %}
                {% include 'survey/includes/question.html' with field=form.cosmetics number=5 %}
                {% include 'survey/includes/question.html' with field=form.birth number=6 %}

                <ul id="weight">
                    <li></li>
                    <li>7、您的身高 {{ form.height }} CM，体重 {{ form.weight }} KG？<span>*</span></li>
                    <li></li>
                </ul>

                {% include 'survey/includes/question.html' with field=form.job number=8 %}
                {% include 'survey/includes/question.html' with field=form.monthly_income number=9 %}
                {% include 'survey/includes/question.html' with field=form.weixin_id number=10 %}
                {% include 'survey/includes/question.html' with field=form.mobile number=11 %}


                <!-- # 12-21 干油 -->
                {% include 'survey/includes/question.html' with field=form.question1 number=12 %}
                {% include 'survey/includes/question.html' with field=form.question2 number=13 %}
                {% include 'survey/includes/question.html' with field=form.question3 number=14 %}
                {% include 'survey/includes/question.html' with field=form.question4 number=15 %}
                {% include 'survey/includes/question.html' with field=form.question5 number=16 %}
                {% include 'survey/includes/question.html' with field=form.question6 number=17 %}
                {% include 'survey/includes/question.html' with field=form.question7 number=18 %}
                {% include 'survey/includes/question.html' with field=form.question8 number=19 %}
                {% include 'survey/includes/question.html' with field=form.question9 number=20 %}
                {% include 'survey/includes/question.html' with field=form.question10 number=21 %}

                <!-- # 22-32 是敏感 -->
                {% include 'survey/includes/question.html' with field=form.question11 number=22 %}
                {% include 'survey/includes/question.html' with field=form.question12 number=23 %}
                {% include 'survey/includes/question.html' with field=form.question13 number=24 %}
                {% include 'survey/includes/question.html' with field=form.question14 number=25 %}
                {% include 'survey/includes/question.html' with field=form.question15 number=26 %}
                {% include 'survey/includes/question.html' with field=form.question16 number=27 %}
                {% include 'survey/includes/question.html' with field=form.question17 number=28 %}
                {% include 'survey/includes/question.html' with field=form.question18 number=29 %}
                {% include 'survey/includes/question.html' with field=form.question19 number=30 %}
                {% include 'survey/includes/question.html' with field=form.question20 number=31 %}
                {% include 'survey/includes/question.html' with field=form.question21 number=32 %}

                <!-- # 33-41 是色素 -->
                {% include 'survey/includes/question.html' with field=form.question22 number=33 %}
                {% include 'survey/includes/question.html' with field=form.question23 number=34 %}
                {% include 'survey/includes/question.html' with field=form.question24 number=35 %}
                {% include 'survey/includes/question.html' with field=form.question25 number=36 %}
                {% include 'survey/includes/question.html' with field=form.question26 number=37 %}
                {% include 'survey/includes/question.html' with field=form.question27 number=38 %}
                {% include 'survey/includes/question.html' with field=form.question28 number=39 %}
                {% include 'survey/includes/question.html' with field=form.question29 number=40 %}
                {% include 'survey/includes/question.html' with field=form.question30 number=41 %}

                <!-- # 42-49 是皱纹 -->
                {% include 'survey/includes/question.html' with field=form.question31 number=42 %}
                {% include 'survey/includes/question.html' with field=form.question32 number=43 %}
                {% include 'survey/includes/question.html' with field=form.question33 number=44 %}
                {% include 'survey/includes/question.html' with field=form.question34 number=45 %}
                {% include 'survey/includes/question.html' with field=form.question35 number=46 %}
                {% include 'survey/includes/question.html' with field=form.question36 number=47 %}
                {% include 'survey/includes/question.html' with field=form.question37 number=48 %}
                {% include 'survey/includes/question.html' with field=form.question38 number=49 %}

                <!-- # 不记分选择题 50-64 -->
                {% include 'survey/includes/question.html' with field=form.non_score_question1 number=50 %}
                <h4>化妆品相关问题，分日间/夜间两组</h4>
                {% include 'survey/includes/question.html' with field=form.non_score_question2 number=51 %}
                {% include 'survey/includes/question.html' with field=form.non_score_question3 number=52 %}
                {% include 'survey/includes/question.html' with field=form.non_score_question4 number=53 %}
                {% include 'survey/includes/question.html' with field=form.non_score_question5 number=54 %}
                {% include 'survey/includes/question.html' with field=form.non_score_question6 number=55 %}
                {% include 'survey/includes/question.html' with field=form.non_score_question7 number=56 %}
                {% include 'survey/includes/question.html' with field=form.non_score_question8 number=57 %}
                {% include 'survey/includes/question.html' with field=form.non_score_question9 number=58 %}
                {% include 'survey/includes/question.html' with field=form.non_score_question10 number=59 %}
                {% include 'survey/includes/question.html' with field=form.non_score_question11 number=60 %}
                {% include 'survey/includes/question.html' with field=form.non_score_question12 number=61 %}
                {% include 'survey/includes/question.html' with field=form.non_score_question13 number=62 %}
                {% include 'survey/includes/question.html' with field=form.non_score_question14 number=63 %}
                {% include 'survey/includes/question.html' with field=form.non_score_question15 number=64 %}

                <!-- # 产品选择问题 65-72 -->
                {% if form.purpose.value == '种草' %}
                    {% include 'survey/includes/product_question.html' with label='65. 种草的卸妆类的护肤品名' formset=cosmetic_products1_formset number=65 category='卸妆' %}
                    {% include 'survey/includes/product_question.html' with label='66. 种草的洁面乳/洁面霜/洁面油类的护肤品名称' formset=cosmetic_products2_formset number=66 category='洁面' %}
                    {% include 'survey/includes/product_question.html' with label='67. 种草用化妆水类护肤品名称' formset=cosmetic_products3_formset number=67 category='化妆水' %}
                    {% include 'survey/includes/product_question.html' with label='68. 种草用乳液／面霜类护肤品名称' formset=cosmetic_products4_formset number=68 category='乳液/面霜' %}
                    {% include 'survey/includes/product_question.html' with label='69. 种草的精华类的护肤品名称' formset=cosmetic_products5_formset number=69 category='精华' %}
                    {% include 'survey/includes/product_question.html' with label='70. 种草的去角质类的护肤品名称' formset=cosmetic_products6_formset number=70 category='去角质' %}
                    {% include 'survey/includes/product_question.html' with label='71. 种草的的面膜类的护肤品名称' formset=cosmetic_products7_formset number=71 category='面膜' %}
                    {% include 'survey/includes/product_question.html' with label='72. 种草的防晒类的护肤品名称' formset=cosmetic_products8_formset number=72 category='防晒' %}
                {% else %}
                    {% include 'survey/includes/product_question.html' with label='65. 目前正在使用的卸妆类的护肤品名' formset=cosmetic_products1_formset number=65 category='卸妆' %}
                    {% include 'survey/includes/product_question.html' with label='66. 目前正在使用的洁面乳/洁面霜/洁面油类的护肤品名称' formset=cosmetic_products2_formset number=66 category='洁面' %}
                    {% include 'survey/includes/product_question.html' with label='67. 目前正在所使用化妆水类护肤品名称' formset=cosmetic_products3_formset number=67 category='化妆水' %}
                    {% include 'survey/includes/product_question.html' with label='68. 目前正在所使用乳液／面霜类护肤品名称' formset=cosmetic_products4_formset number=68 category='乳液/面霜' %}
                    {% include 'survey/includes/product_question.html' with label='69. 目前正在使用的精华类的护肤品名称' formset=cosmetic_products5_formset number=69 category='精华' %}
                    {% include 'survey/includes/product_question.html' with label='70. 目前正在使用的去角质类的护肤品名称' formset=cosmetic_products6_formset number=70 category='去角质' %}
                    {% include 'survey/includes/product_question.html' with label='71. 目前正在使用的的面膜类的护肤品名称' formset=cosmetic_products7_formset number=71 category='面膜' %}
                    {% include 'survey/includes/product_question.html' with label='72. 目前正在使用的防晒类的护肤品名称' formset=cosmetic_products8_formset number=72 category='防晒' %}
                {% endif %}

                <!-- # 73-74 其他问题 -->
                {% include 'survey/includes/question.html' with field=form.other_question1 number=73 %}
                {% include 'survey/includes/question.html' with field=form.other_question2 number=74 %}

                {{ form.errors }}
                <div class="button-div">
                    <input type="submit" value="提交" id="button"/>
                </div>
            </form>
        </div>
    </div>
</div><!-- /.container -->


<!-- Bootstrap core JavaScript
================================================== -->
<script src="{% static 'plugins/bootstrap/js/bootstrap.min.js' %}"></script>

<script src="{% static 'js/frontend/index.js' %}?2"></script>

<script src="{% static 'js/jquery.mask.min.js' %}"></script>

<script src="{% static 'js/frontend/jquery.formset.extend.js' %}"></script>
<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
{#<script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>#}

<script type="text/javascript">
    $(document).ready(function(){
        $('#id_birth').mask("0000-00-00", {placeholder: "____-__-__"});
    });
</script>

<script>
    //Credit: http://diveintohtml5.org/storage.html, 'uuid', 'purpose',
    var textFields = ['name', 'birth', 'height', 'weight', 'job', 'weixin_id', 'mobile', 'non_score_question15', 'other_question1', 'other_question2'];
    var selectFields = ['sex', 'monthly_income', 'question1', 'question2', 'question3', 'question4', 'question5', 'question6', 'question7',
        'question8', 'question9', 'question10', 'question11', 'question12', 'question13', 'question14', 'question15',
        'question16', 'question17', 'question18', 'question19', 'question20', 'question21', 'question22', 'question23',
        'question24', 'question25', 'question26', 'question27', 'question28', 'question29', 'question30', 'question31',
        'question32', 'question33', 'question34', 'question35', 'question36', 'question37', 'question38', 'non_score_question1',
        'non_score_question2', 'non_score_question3', 'non_score_question4', 'non_score_question5', 'non_score_question6',
        'non_score_question7', 'non_score_question8', 'non_score_question9', 'non_score_question10', 'non_score_question11',
        'non_score_question12', 'non_score_question13', 'non_score_question14'];

    function supports_html5_storage() {
        try {
            return 'localStorage' in window && window['localStorage'] !== null;
        } catch (e) {
            return false;
        }
    }

    function loadOld() {
        console.log("Running loadOld");
        $(textFields).each(function (index, field) {
            if (localStorage["form." + field]) {
                $("input#id_" + field).val(localStorage["form." + field]);
                $("textarea#id_" + field).val(localStorage["form." + field]);
            }
        });
        $(selectFields).each(function (index, field) {
            if (localStorage["form." + field])
                $("input[name=" + field + "]").val([localStorage["form." + field]]);
        });

        localStorage.clear();
    }

    function saveData() {
        console.log("Running saveData");
        $(textFields).each(function (index, field) {
            localStorage["form." + field] = $("#id_" + field).val();
{#            console.log(field + " = " + $("#id_" + field).val());#}
        });
        $(selectFields).each(function (index, field) {
            localStorage["form." + field] = $("input[name='" + field + "']:checked").val();
{#            console.log(field + " = " + $("input[name='" + field + "']:checked").val());#}
        });
    }

    $(document).ready(function () {
{#        console.log('init');#}
{#        if (supports_html5_storage()) {#}
{#            //load in old data#}
{#            loadOld();#}
{#            //start storing#}
{#            window.setInterval(saveData, 10 * 1000);#}
{#            // handle the form#}
{#            $("#form").submit(function () {#}
{#                //could do validation here as well#}
{#                localStorage.clear();#}
{#            });#}
{#        }#}
    });
</script>

</body>
</html>
